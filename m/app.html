<style>
	.nav_bar { display: flex; align-items: center; justify-content: space-between; padding: 1rem 2rem; background: #fff; border-bottom: 1px solid var(--line); height: 80px; }
	.app_container { width: 100%; max-width: 1100px; margin: 0 auto; padding: 2rem; }
	.hidden { display: none !important; }
	
	/* Profile Cards */
	.select_grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; }
	.select_user_card { background: #fff; border-radius: var(--radius); padding: 2rem 1rem; display: flex; flex-direction: column; align-items: center; box-shadow: var(--shadow); border: 3px solid transparent; }
	.select_user_card img { width: 120px; height: 120px; border-radius: 50%; object-fit: cover; margin-bottom: 1rem; }
	
	/* Home Layout */
	.home_layout { display: grid; grid-template-columns: 300px 1fr; gap: 2rem; }
	.home_profile_side { background: #fff; padding: 2.5rem 1.5rem; border-radius: var(--radius); box-shadow: var(--shadow); text-align: center; border-top: 8px solid var(--pri); }
	.home_profile_side img { width: 150px; height: 150px; border-radius: 50%; margin-bottom: 1rem; }
	
	/* Content Items */
	.home_menu_grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.2rem; }
	.home_menu_item { background: #fff; padding: 2rem; border-radius: var(--radius); box-shadow: var(--shadow); text-align: left; min-height: 180px; }
	.home_menu_item.highlight { background: var(--sec); color: #fff; }
	
	/* Modal */
	.modal_wrap { position: fixed; inset: 0; z-index: 1000; display: flex; align-items: center; justify-content: center; }
	.modal_backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); }
	.modal_box { position: relative; background: #fff; border-radius: var(--radius); overflow: hidden; }
	.modal_head { padding: 1rem 1.5rem; display: flex; justify-content: space-between; border-bottom: 1px solid #eee; }
	
	.app_btn_pill { padding: 0.8rem 1.5rem; border-radius: 14px; font-weight: 800; cursor: pointer; border: 0; background: #f1f5f9; color: var(--sec); }
</style>

<nav class="nav_bar">
	<div data-role="title" style="font-weight:900; font-size:1.4rem; color:var(--sec);">ì‹¤ë²„ì½•</div>
	<div style="display:flex; gap:10px;">
		<button class="app_btn_pill" data-action="plan">ğŸ“… ê³„íšì•ˆ</button>
		<button class="app_btn_pill" data-action="logout">ë¡œê·¸ì•„ì›ƒ</button>
	</div>
</nav>

<main class="app_container">
	</main>

<template id="t_profile_select">
	<div style="text-align:center; margin-bottom:2rem;"><h2>ë°˜ê°‘ìŠµë‹ˆë‹¤! ì–´ë¥´ì‹ ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</h2></div>
	<div class="select_grid profile-grid">
		<button class="select_user_card" style="border:2px dashed #ccc; background:none;" data-action="add_elder">
			<span style="font-size:3rem; color:#ccc;">+</span>
			<strong>ì–´ë¥´ì‹  ë“±ë¡</strong>
		</button>
	</div>
</template>

<template id="t_profile_add">
	<div style="max-width:500px; margin: 0 auto; background:#fff; padding:3rem; border-radius:24px; text-align:center;">
		<div data-action="trigger_file" style="cursor:pointer; margin-bottom:1.5rem;">
			<img id="preview_img" src="https://via.placeholder.com/150?text=ì‚¬ì§„ì¶”ê°€" style="width:140px; height:140px; border-radius:50%; border:4px solid var(--line);">
		</div>
		<input type="file" id="elder_file" class="hidden" onchange="handleFile(this)" accept="image/*">
		<input type="text" id="elder_name_input" placeholder="ì„±í•¨ì„ ì…ë ¥í•˜ì„¸ìš”" style="width:100%; padding:1rem; border:2px solid #eee; border-radius:12px; margin-bottom:1.5rem;">
		<div style="display:flex; gap:10px;">
			<button class="app_btn_pill" data-action="home" style="flex:1;">ì·¨ì†Œ</button>
			<button class="app_btn_pill" data-action="save_elder" style="flex:2; background:var(--pri); color:#fff;">ë“±ë¡ ì™„ë£Œ</button>
		</div>
	</div>
</template>

<template id="t_person_home">
	<div class="home_layout">
		<aside class="home_profile_side">
			<img src="" data-bind="elder_img">
			<h3 data-bind="elder_name">ì„±í•¨</h3>
			<div style="display:flex; flex-direction:column; gap:10px; margin-top:2rem;">
				<button class="app_btn_pill" data-action="view_weekly">ğŸ“… ì£¼ê°„ ìŠ¤ì¼€ì¤„</button>
				<button class="app_btn_pill" data-action="view_monthly">ğŸ—“ï¸ ì›”ê°„ ë‹¬ë ¥</button>
				<button class="app_btn_pill" data-action="calendar" style="background:var(--sec); color:#fff;">ì „ì²´ì¼ì •í‘œ</button>
				<button class="app_btn_pill" data-action="home" style="margin-top:1rem; font-size:0.8rem;">ì–´ë¥´ì‹  ë³€ê²½</button>
			</div>
		</aside>
		
		<div class="home_main_view">
			<div class="weekly_view">
				<div class="home_menu_grid">
					<button class="home_menu_item highlight" data-action="open_today_cog"><strong>ì˜¤ëŠ˜ì˜ ì¸ì§€ì½•</strong><p>ë§¤ì¼ë§¤ì¼ ë‘ë‡Œìš´ë™</p></button>
					<button class="home_menu_item" data-action="open_review"><strong>ì¸ì§€ì½• ë³µìŠµ</strong><p>ë°°ì› ë˜ ë‚´ìš© ë‹¤ì‹œí•˜ê¸°</p></button>
				</div>
			</div>
			<div class="monthly_view hidden">
				<div style="background:#fff; padding:2rem; border-radius:24px; text-align:center;">
					<p style="margin-bottom:1rem; font-weight:800;">12ì›” ì „ì²´ í™œë™ í˜„í™©</p>
					<div style="background:#f8f9fa; height:300px; display:flex; align-items:center; justify-content:center; border-radius:12px; border:2px dashed #ddd;">ì›”ê°„ ìº˜ë¦°ë” ì»´í¬ë„ŒíŠ¸ ìœ„ì¹˜</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template id="t_content_list_cognitive_today">
	<div style="margin-bottom:2rem;"><h2>ì˜¤ëŠ˜ì˜ ì¸ì§€ì½• ëª©ë¡</h2></div>
	<div class="home_menu_grid">
		<button class="home_menu_item" data-action="play" data-content-id="today_01"><strong>ë‹¨ì–´ í€´ì¦ˆ</strong></button>
		<button class="home_menu_item" data-action="play" data-content-id="today_02"><strong>ê¸°ì–µë ¥ í›ˆë ¨</strong></button>
	</div>
	<button class="app_btn_pill" data-action="close_play" style="margin-top:2rem;">â†© ëŒì•„ê°€ê¸°</button>
</template>

<template id="t_content_player">
	<div id="player_area" style="background:#000; border-radius:24px; width:100%; aspect-ratio:16/9; overflow:hidden;"></div>
	<div style="display:flex; justify-content:center; gap:20px; margin-top:2rem;">
		<button class="app_btn_pill" data-action="close_play" style="padding:1rem 3rem;">ê·¸ë§Œí•˜ê¸°</button>
		<button class="app_btn_pill" data-action="done_content" style="padding:1rem 4rem; background:var(--pri); color:#fff;">ì™„ë£Œí•˜ê¸°</button>
	</div>
</template>