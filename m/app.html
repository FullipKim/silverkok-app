<style>
@import url('/m/app.css');
/* ===== templates (app.html) ===== */
nav{position:sticky;top:0;z-index:10;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:16px 18px;background:#fff;border-bottom:1px solid rgba(15,76,129,.12);font-family: 'Wanted Sans';}
nav>div:first-child{font-weight:800;font-size:22px;letter-spacing:-1px}
nav>div:last-child{display:flex;gap:10px}
nav button{padding:10px 14px;border-radius:12px;border:1px solid rgba(15,76,129,.15);background:#fff;font-weight:700;cursor:pointer}
nav button:hover{border-color:rgba(15,76,129,.35)}
#btn_add{background:var(--bs-secondary);color:#fff;border-color:transparent}
#btn_add:hover{opacity:.9}
#logout{background:#f3f3f3;border-color:transparent}

/* main layout */
main{width: 100%;padding:0;margin: 0;}

/* profile select grid */
.grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:14px;color: var(--tx);}
.grid>[data-elder]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;padding:16px 12px;cursor:pointer;user-select:none}
.grid>[data-elder]:hover{border-color:rgba(15,76,129,.28);transform:translateY(-1px)}
.grid>[data-elder] img{width:88px;height:88px;border-radius:50%;object-fit:cover}
.grid>[data-elder] div{font-weight:800}

/* plan modal */
#plan_modal{position:fixed;inset:0;z-index:9999}
#plan_modal .overlay{position:absolute;inset:0;background:rgba(0,0,0,.35);display:flex;align-items:center;justify-content:center;padding:24px}
#plan_modal .modal{width:min(920px,92vw);background:#fff;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.25);overflow:hidden;position:relative}
#plan_modal .modal img{display:block;width:100%;height:auto}
#plan_modal .modal button{position:absolute;right:12px;top:12px;border:0;border-radius:12px;padding:10px 14px;background:#f3f3f3;font-weight:800;cursor:pointer}

/* add form */
.panel{background:#fff;border:1px solid rgba(15,76,129,.12);border-radius:18px;padding:16px}
.panel .row{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.panel strong{font-size:20px;font-weight:900;letter-spacing:-1px}
.form-grid{display:grid;grid-template-columns:170px 1fr;gap:12px;align-items:start}
.photo{height:170px;border-radius:16px;border:1px dashed rgba(15,76,129,.25);display:flex;align-items:center;justify-content:center;cursor:pointer;background:rgba(15,76,129,.03);overflow:hidden}
.photo input{display:none}
.photo span{font-weight:800;color:rgba(15,76,129,.7)}
.fields{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.fields input:nth-child(1){grid-column:1/3}
.form-grid>select,.form-grid>input{width:100%;padding:12px 12px;border-radius:14px;border:1px solid rgba(15,76,129,.12);font-size:16px;background:#fff}
.form-grid>input.full{grid-column:1/3}
.actions{display:flex;justify-content:flex-end;gap:10px;margin-top:14px}
.actions button{border:0;border-radius:14px;padding:12px 16px;font-weight:900;cursor:pointer}
.btn-mute{background:rgba(237,102,99,.12);color:var(--bs-primary)}
.btn-primary{background:var(--bs-secondary);color:#fff}
.btn-primary:hover{opacity:.92}

/* elder home */
header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 16px;border-radius:18px;background:#fff;border:1px solid rgba(15,76,129,.12);margin-bottom:14px}
header [data-elder-name]{display:flex;align-items:center;gap:10px;font-weight:900;font-size:20px}
header button{padding:10px 14px;border-radius:12px;border:1px solid rgba(15,76,129,.12);background:#fff;font-weight:800;cursor:pointer}
header button:hover{border-color:rgba(15,76,129,.28)}
.content-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:14px}
.content-grid>[data-content]{height:170px;border-radius:18px;border:1px solid rgba(15,76,129,.12);background:linear-gradient(180deg,rgba(237,102,99,.10),rgba(15,76,129,.03));display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:900;letter-spacing:-1px;cursor:pointer;user-select:none}
.content-grid>[data-content]:hover{border-color:rgba(15,76,129,.28);transform:translateY(-1px)}

/* content list */
.grid>[data-play]{height:140px;border-radius:18px;border:1px solid rgba(15,76,129,.12);background:#fff;display:flex;align-items:center;justify-content:center;font-weight:900;cursor:pointer}
.grid>[data-play]:hover{border-color:rgba(15,76,129,.28);transform:translateY(-1px)}

/* player */
.player{background:#fff;border:1px solid rgba(15,76,129,.12);border-radius:18px;overflow:hidden}
.player iframe{display:block;width:100%;aspect-ratio:16/9;border:0;background:#000}
.player #btn_done{width:100%;border:0;padding:16px 18px;font-weight:900;background:var(--bs-secondary);color:#fff;cursor:pointer}
.player #btn_done:hover{opacity:.92}

/* tablet responsive */
@media (max-width:980px){
	.grid{grid-template-columns:repeat(3,minmax(0,1fr))}
	.form-grid{grid-template-columns:150px 1fr}
}
@media (max-width:720px){
	.grid{grid-template-columns:repeat(2,minmax(0,1fr))}
	.fields{grid-template-columns:1fr}
	.form-grid>input.full{grid-column:1/3}
	.content-grid{grid-template-columns:1fr}
}

/* ===== Swipe rails (2x2 pages) ===== */
.t4rail,.t5rail{display:flex;gap:16px;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;padding-bottom:12px}
.t4rail::-webkit-scrollbar,.t5rail::-webkit-scrollbar{height:10px}
.t4rail::-webkit-scrollbar-thumb,.t5rail::-webkit-scrollbar-thumb{background:#e0e0e0;border-radius:999px}
.t4page,.t5page{flex:0 0 100%;scroll-snap-align:start}
.t4grid,.t5grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.t4btn,.t5item{position:relative;min-height:120px;border-radius:16px;border:1px solid #dfe6ef;background:linear-gradient(180deg,#f5f5f5,#eee);font-weight:800;font-size:20px}
.t4btn:active,.t5item:active{transform:translateY(1px)}
.t5item.done::before{content:"완료";position:absolute;left:10px;top:10px;background:#111;color:#fff;font-size:12px;font-weight:900;padding:6px 8px;border-radius:10px}
@media (max-width:920px){.t4btn,.t5item{min-height:110px;font-size:18px}}

/* ===== Week bar ===== */
.t4wk{display:grid;grid-template-columns:repeat(7,1fr);gap:10px;margin-bottom: 2em;}
.t4wk .day{position:relative;border:1px solid #e6edf5;border-radius:14px;padding:10px 8px;background:#fff;text-align:center}
.t4wk .md{font-weight:900;font-size:14px}
.t4wk .wd{margin-top:4px;font-weight:800;font-size:13px;color:#666}
.t4wk .stamp{position:absolute;right:8px;top:8px;width:34px;height:34px;opacity:.95;transform:rotate(-12deg)}

/* ===== Modal ===== */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.32);display:flex;align-items:center;justify-content:center;z-index:9999;padding:24px}
.modal-box{width:min(920px,92vw);background:#fff;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.25);overflow:hidden}
.modal-head{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid #eef2f6}
.modal-body{padding:16px}
.modal-img{width:100%;border-radius:12px;display:block}

/* ===== Month calendar ===== */
.monthhead{font-weight:900;font-size:18px;margin-bottom:12px}
.monthgrid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.wlabel{font-weight:900;font-size:13px;color:#666;text-align:center;padding:6px 0}
.mcell{position:relative;border:1px solid #e6edf5;border-radius:14px;min-height:72px;padding:8px;background:#fff}
.mcell.dim{opacity:.45}
.mcell.today{outline:2px solid #111;outline-offset:-2px}
.mcell .num{font-weight:900;font-size:14px}
.mcell .stamp{position:absolute;right:8px;bottom:8px;width:34px;height:34px;opacity:.95;transform:rotate(-12deg)}

/* ===== Profile cards: JS generated ===== */
.profile-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:18px;margin-top:14px}
.profile-card{border:1px solid #e6edf5;border-radius:16px;background:#fff;padding:18px 12px;display:flex;flex-direction:column;align-items:center;gap:10px}
.profile-card img{width:86px;height:86px;border-radius:999px;object-fit:cover;border:1px solid #eef2f6}
.profile-card .name{font-weight:900;font-size:16px}
@media (max-width:1000px){.profile-grid{grid-template-columns:repeat(3,1fr)}}
@media (max-width:720px){.profile-grid{grid-template-columns:repeat(2,1fr)}}

/* ===== Add form spacing ===== */
.add-form{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-top:14px}
.add-form input,.add-form select{width:100%;padding:10px 12px;border:1px solid #dfe6ef;border-radius:12px;font-size:14px}
.add-form .actions{grid-column:1/-1;display:flex;justify-content:flex-end;gap:10px}
</style>

<nav class="topbar">
	<div class="topbar-left"><strong></strong></div>
	<div class="topbar-right">
		<button class="pill" data-action="home" type="button">처음으로</button>
		<button class="pill red" data-action="logout" type="button">로그아웃</button>
	</div>
</nav>
  
  <main></main>
  
  <!-- ===== Templates ===== -->
  <template id="t_profile_select" data-title="어르신 선택">
	  <section class="t1wrap">
		  <div class="t1head">
			  <h1>어르신을 선택하세요.</h1>
			  <div class="t1headR">
				  <button class="pill blue" data-action="plan" type="button">계획안 보기</button>
				  <button class="pill red" data-action="add" type="button">어르신 추가</button>
			  </div>
		  </div>
		  <div class="profile-grid"></div>
	  </section>
  </template>
  
  <template id="t_profile_add" data-title="어르신 추가">
	  <section class="t2wrap">
		  <div class="t2head">
			  <h1>어르신 추가</h1>
		  </div>
		  <div class="add-form">
			  <input data-field="name" placeholder="성함" />
			  <input data-field="org" placeholder="기관" />
			  <input data-field="birth" placeholder="생년월일" />
			  <input data-field="guardian" placeholder="보호자 성함" />
			  <input data-field="phone" placeholder="보호자 연락처" />
			  <input data-field="addr" placeholder="주소" />
			  <select data-field="grade">
				  <option value="">등급</option>
				  <option>1등급</option><option>2등급</option><option>3등급</option>
				  <option>4등급</option><option>5등급</option>
			  </select>
			  <select data-field="level">
				  <option value="">인지 수준</option>
				  <option>쉬워요</option><option>보통이에요</option><option>어려워요</option>
			  </select>
			  <div class="actions">
				  <button class="pill" data-action="cancel_add" type="button">취소</button>
				  <button class="pill primary" data-action="save_add" type="button">저장</button>
			  </div>
		  </div>
	  </section>
  </template>

  <template id="t_profile_edit" data-title="어르신 관리">
	  <section class="t2wrap">
		  <div class="t2head">
			  <h1>어르신 관리</h1>
		  </div>
		  <div class="add-form">
			  <input data-field="name" value="김금자" />
			  <input data-field="org" value="행복요양원" />
			  <input data-field="birth" value="1960-01-10" />
			  <input data-field="guardian" value="조보아" />
			  <input data-field="phone" value="010-1234-5678" />
			  <input data-field="addr" value="서울특별시 자양동 400-8 302호" />
			  <select data-field="grade">
				  <option>등급</option>
				  <option>1등급</option><option selected>2등급</option><option>3등급</option>
				  <option>4등급</option><option>5등급</option>
			  </select>
			  <select data-field="level">
				  <option>인지 수준</option>
				  <option selected>쉬워요</option><option>보통이에요</option><option>어려워요</option>
			  </select>
			  <div class="actions">
				  <button class="pill" data-action="cancel_add" type="button">취소</button>
				  <button class="pill primary" data-action="save_add" type="button">저장</button>
			  </div>
		  </div>
	  </section>
  </template>
  
  <template id="t_person_home" data-title="어르신 활동">
	  <section class="t4wrap">
		  <div class="t4top">
			  <div class="t4left">
				  <img class="t4av" data-bind="elder_img" src="" alt="">
				  <div class="t4name" data-bind="elder_name">-</div>
			  </div>
			  <div class="t4mid">이번 주</div>
			  <div class="t4right">
				  <button class="pill" type="button">도움</button>
				  <button class="pill" data-action="profile_edit" type="button">관리</button>
				  <button class="pill" data-action="toggle_calendar" type="button">달력</button>
			  </div>
		  </div>
  
		  <div class="t4wk" data-area="weekbar"></div>
  
		  <div class="t4pager">
			  <div class="t4rail">
				  <div class="t4page">
					  <div class="t4grid">
						  <button class="t4btn" data-action="open_today_cog" type="button">오늘의 인지콕</button>
						  <button class="t4btn" type="button">마음체크리스트</button>
						  <button class="t4btn" data-action="open_review" type="button">복습활동(인지콕)</button>
						  <button class="t4btn" type="button">건강체조</button>
					  </div>
				  </div>
				  <div class="t4page">
					  <div class="t4grid">
						  <button class="t4btn" type="button">종이접기</button>
						  <button class="t4btn" type="button">두뇌콕</button>
						  <button class="t4btn" type="button">미술콕</button>
						  <button class="t4btn" type="button">집중콕</button>
					  </div>
				  </div>
			  </div>
		  </div>
	  </section>
  </template>
  
  <template id="t_content_list_cognitive_today" data-title="오늘의 인지콕">
	  <section class="t5wrap">
		  <div class="t5top">
			  <div class="t5left">
				  <div class="t5title">오늘의 인지콕</div>
			  </div>
			  <div class="t5right">
				  <button class="pill" data-action="back_person" type="button">뒤로</button>
			  </div>
		  </div>
  
		  <div class="t5rail">
			  <div class="t5page">
				  <div class="t5grid">
					  <button class="t5item" data-action="play" data-content-id="cog_01" type="button">인지콕 1</button>
					  <button class="t5item" data-action="play" data-content-id="cog_02" type="button">인지콕 2</button>
					  <button class="t5item" data-action="play" data-content-id="cog_03" type="button">인지콕 3</button>
					  <button class="t5item" data-action="play" data-content-id="cog_04" type="button">인지콕 4</button>
				  </div>
			  </div>
			  <div class="t5page">
				  <div class="t5grid">
					  <button class="t5item" data-action="play" data-content-id="cog_05" type="button">인지콕 5</button>
					  <button class="t5item" data-action="play" data-content-id="cog_06" type="button">인지콕 6</button>
					  <button class="t5item" data-action="play" data-content-id="cog_07" type="button">인지콕 7</button>
					  <button class="t5item" data-action="play" data-content-id="cog_08" type="button">인지콕 8</button>
				  </div>
			  </div>
		  </div>
	  </section>
  </template>
  
  <template id="t_content_list_review" data-title="인지콕 복습">
	  <section class="t5wrap">
		  <div class="t5top">
			  <div class="t5left">
				  <div class="t5title">복습활동(인지콕)</div>
			  </div>
			  <div class="t5right">
				  <button class="pill" data-action="back_person" type="button">뒤로</button>
			  </div>
		  </div>
  
		  <div class="levelbar">
			  <button class="pill" data-action="set_level" data-level="easy" type="button">쉬워요</button>
			  <button class="pill" data-action="set_level" data-level="normal" type="button">보통이에요</button>
			  <button class="pill" data-action="set_level" data-level="hard" type="button">어려워요</button>
			  <div class="levelstat">학습현황통계(데모)</div>
		  </div>
  
		  <div class="t5rail">
			  <div class="t5page">
				  <div class="t5grid">
					  <button class="t5item" data-action="play" data-content-id="rev_01" type="button">복습 1</button>
					  <button class="t5item" data-action="play" data-content-id="rev_02" type="button">복습 2</button>
					  <button class="t5item" data-action="play" data-content-id="rev_03" type="button">복습 3</button>
					  <button class="t5item" data-action="play" data-content-id="rev_04" type="button">복습 4</button>
				  </div>
			  </div>
			  <div class="t5page">
				  <div class="t5grid">
					  <button class="t5item" data-action="play" data-content-id="rev_05" type="button">복습 5</button>
					  <button class="t5item" data-action="play" data-content-id="rev_06" type="button">복습 6</button>
					  <button class="t5item" data-action="play" data-content-id="rev_07" type="button">복습 7</button>
					  <button class="t5item" data-action="play" data-content-id="rev_08" type="button">복습 8</button>
				  </div>
			  </div>
		  </div>
	  </section>
  </template>
  
  <template id="t_content_player" data-title="활동하기">
	  <section class="playerwrap">
		  <div class="playertop">
			  <div class="pright">
				  <button class="pill" data-action="done_content" type="button">완료</button>
				  <button class="pill" data-action="back_person" type="button">뒤로</button>
			  </div>
		  </div>
		  <div class="playerbox">
			  <iframe src="about:blank" allowfullscreen></iframe>
		  </div>
	  </section>
  </template>
  